(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3018:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var l=r(5155),n=r(2115),o=r(2821),a=r(5889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,o.$)(t))}let s=(e,t,r)=>Math.min(r,Math.max(t,e));function c(e,t,r,l){let n=null!=l?l-1:1/0;return{row:s(e.row+t,0,n),col:s(e.col+r,0,n)}}let u=["tl","tr","bl","br","tc","rc","bc","lc","cc"],d={tl:"absolute top-1 left-1 translate-x-0.5 translate-y-0.5",tr:"absolute top-1 right-1 -translate-x-0.5 translate-y-0.5",bl:"absolute bottom-1 left-1 translate-x-0.5 -translate-y-0.5",br:"absolute bottom-1 right-1 -translate-x-0.5 -translate-y-0.5",tc:"absolute top-1 left-1/2 -translate-x-1/2 translate-y-0.5",rc:"absolute right-1 top-1/2 -translate-y-1/2 -translate-x-0.5",bc:"absolute bottom-1 left-1/2 -translate-x-1/2 -translate-y-0.5",lc:"absolute left-1 top-1/2 -translate-y-1/2 translate-x-0.5",cc:"absolute inset-1 flex items-center justify-center"},f={red:"bg-red-200 dark:bg-red-500/40",orange:"bg-orange-200 dark:bg-orange-500/40",yellow:"bg-yellow-200 dark:bg-yellow-500/40",green:"bg-green-200 dark:bg-green-500/40",cyan:"bg-cyan-200 dark:bg-cyan-500/40",blue:"bg-blue-200 dark:bg-blue-500/40",violet:"bg-violet-200 dark:bg-violet-500/40",pink:"bg-pink-200 dark:bg-pink-500/40",transparent:"bg-transparent"};function g(e){return Array.from({length:e},()=>Array(e).fill(!1))}function h(e){return e.some(e=>e.some(Boolean))}function p(e,t){return e.findIndex(e=>{let[r,l]=e;return r===t[0]&&l===t[1]})}function b(e,t){return -1===p(e,t)&&e.push(t),e}function m(e,t){return e.filter(e=>{let[r,l]=e;return r!==t[0]||l!==t[1]})}function v(e){let t=[];for(let r=0;r<e.length;r++)for(let l=0;l<e[r].length;l++)e[r][l]&&t.push([r,l]);return t}function x(e){return Array.from({length:e},()=>Array(e).fill(0))}function w(e){return Array.from({length:e},()=>Array.from({length:e},()=>Array(e+1).fill(0)))}function y(e,t){return h(e)?v(e):t?[t]:[]}let k="SG1|",C={red:"r",orange:"o",yellow:"y",green:"g",blue:"b",cyan:"c",violet:"v",pink:"p",transparent:"t"},j=Object.fromEntries(Object.entries(C).map(e=>{let[t,r]=e;return[r,t]}));function N(e){return e.toString(36)}function A(e){return parseInt(e,36)}function S(e,t){let r=Array(t*t),l=0;for(let a=0;a<t;a++)for(let i=0;i<t;i++){var n,o;let t=null!=(o=null==e||null==(n=e[a])?void 0:n[i])?o:0;if(t<0||t>=36)throw Error("Value out of encodable range (0..35)");r[l++]=N(t)}return r.join("")}function M(e,t){let r=Math.max(1,Math.max(0,Math.pow(2,t)-1).toString(36).length),l=Array(t*t),n=0;for(let a=0;a<t;a++)for(let i=0;i<t;i++){var o;let s=0,c=null==e||null==(o=e[a])?void 0:o[i];if(c)for(let e=1;e<=t;e++)c[e]&&(s|=1<<e-1);l[n++]=s.toString(36).padStart(r,"0")}return{width:r,data:l.join("")}}function z(e,t){if(!e||e.length<1)throw Error("Corrupt state: empty mask payload");let r=A(e[0]);if(r<1||r>10)throw Error("Corrupt state: invalid mask width");let l=e.slice(1),n=t*t*r;if(l.length!==n)throw Error("Corrupt state: mask body length mismatch");let o=w(t),a=0;for(let e=0;e<t;e++)for(let n=0;n<t;n++){let i=l.slice(a,a+r);a+=r;let s=parseInt(i,36)||0;for(let r=1;r<=t;r++)o[e][n][r]=s>>r-1&1?1:0}return o}let E=n.forwardRef(function(e,t){var r;let{size:o=9,className:a,presetGrid:s,editedGrid:E,pencilGrid:I,pencilMode:R=null,currentCell:P,selectedCells:_,onCellSelect:D,onSelectionChange:T,onCurrentCellChange:U,box:L,regions:O,cellClassName:B,dividerClassName:F="border-foreground dark:border-muted",...G}=e;if(!Number.isInteger(o)||o<=0)throw Error("Size must be a positive integer.");if(O&&(O.length!==o||O.some(e=>e.length!==o)))throw Error('Invalid "regions": expected a size\xd7size matrix.');let K=(0,n.useMemo)(()=>g(o),[o]),[V,W]=(0,n.useState)(void 0),[X,$]=(0,n.useState)(K),[q,H]=(0,n.useState)([]),Q=(0,n.useRef)(null),Y=(0,n.useRef)(null),J=(0,n.useRef)(!1),Z=(0,n.useRef)(null),[ee,et]=(0,n.useState)(()=>x(o)),[er,el]=(0,n.useState)(()=>w(o)),[en,eo]=(0,n.useState)(()=>w(o)),[ea,ei]=(0,n.useState)(()=>Array.from({length:o},()=>Array.from({length:o},()=>[])));(0,n.useEffect)(()=>{$(K),W(void 0),H([]),et(x(o)),el(w(o)),eo(w(o)),ei(Array.from({length:o},()=>Array.from({length:o},()=>[])))},[o,K]);let es=(0,n.useMemo)(()=>null!=L?L:function(e){if(9===e)return{rows:3,cols:3};let t=Math.floor(Math.sqrt(e));return t>1&&e%t==0?{rows:t,cols:e/t}:{rows:e,cols:1}}(o),[L,o]),ec=(0,n.useMemo)(()=>{if(O)return(e,t)=>O[e][t];let e=es.cols,t=es.rows,r=Math.ceil(o/e);return(l,n)=>Math.floor(l/t)*r+Math.floor(n/e)},[O,es,o]),eu=null!=P?P:V,ed=!(r=null!=_?_:X)||r.length!==o||r.some(e=>e.length!==o)?g(o):r,ef=(0,n.useCallback)((e,t)=>{var r,l;return(null!=(l=null==s||null==(r=s[e])?void 0:r[t])?l:0)>0},[s]);(0,n.useEffect)(()=>{h(ed)||(P||W(void 0),H([]),null==U||U(void 0))},[ed,P,U]);let eg=(0,n.useCallback)((e,t)=>{var r;return!!(null==ed||null==(r=ed[e])?void 0:r[t])},[ed]),eh=(0,n.useCallback)((e,t)=>{let r=["size-10","border","border-foreground","dark:border-muted","text-center","select-none","cursor-pointer"];B&&r.push(B);let l=[];if(O){let r=ec(e,t),n=0===e||ec(e-1,t)!==r,a=0===t||ec(e,t-1)!==r,i=t===o-1||ec(e,t+1)!==r,s=e===o-1||ec(e+1,t)!==r;n&&l.push("border-t-2",F),a&&l.push("border-l-2",F),i&&l.push("border-r-2",F),s&&l.push("border-b-2",F)}else{let r=0===e||e%es.rows==0,n=0===t||t%es.cols==0,a=t===o-1||(t+1)%es.cols==0,i=e===o-1||(e+1)%es.rows==0;r&&l.push("border-t-2",F),n&&l.push("border-l-2",F),a&&l.push("border-r-2",F),i&&l.push("border-b-2",F)}return i(r.join(" "),l.join(" "))},[O,ec,o,es,F,B]),ep=(0,n.useCallback)(e=>{_||$(e),null==T||T(e)},[_,T]),eb=(0,n.useCallback)(e=>{P||W(e),null==U||U(e)},[P,U]);(0,n.useImperativeHandle)(t,()=>({annotateColor:e=>{let t=y(ed,eu);t.length&&ei(r=>{let l=r.map(e=>e.map(e=>e.slice()));for(let[r,n]of t){let t=l[r][n],o=t.indexOf(e);o>=0?t.splice(o,1):t.push(e)}return l})},annotateClear:()=>{let e=y(ed,eu);e.length&&ei(t=>{let r=t.map(e=>e.map(e=>e.slice()));for(let[t,l]of e)r[t][l]=[];return r})},setDigit:e=>{let t=y(ed,eu);t.length&&et(r=>{let l=r.map(e=>e.slice());for(let[r,n]of t)ef(r,n)||(l[r][n]=e>0?e:0);return l})},toggleCenterNote:e=>{if(e<1||e>o)return;let t=y(ed,eu);t.length&&el(r=>{let l=r.map(e=>e.map(e=>e.slice()));for(let[r,n]of t)ef(r,n)||(l[r][n][e]=+!l[r][n][e]);return l})},toggleCornerNote:e=>{if(e<1||e>o)return;let t=y(ed,eu);t.length&&eo(r=>{let l=r.map(e=>e.map(e=>e.slice()));for(let[r,n]of t)ef(r,n)||(l[r][n][e]=+!l[r][n][e]);return l})},clearCenterNotes:()=>{let e=y(ed,eu);e.length&&el(t=>{let r=t.map(e=>e.map(e=>e.slice()));for(let[t,l]of e)ef(t,l)||r[t][l].fill(0);return r})},clearCornerNotes:()=>{let e=y(ed,eu);e.length&&eo(t=>{let r=t.map(e=>e.map(e=>e.slice()));for(let[t,l]of e)ef(t,l)||r[t][l].fill(0);return r})},exportState:()=>{let e=N(o),t=S(null!=s?s:x(o),o),r=S(ee,o),l=M(er,o),n=M(en,o),a=function(e,t){let r="";for(let o=0;o<t;o++)for(let a=0;a<t;a++){var l,n;let t=(null!=(n=null==e||null==(l=e[o])?void 0:l[a])?n:[]).map(e=>{var t;return null!=(t=C[e])?t:""}).join("");if(t.length>=36)throw Error("Too many color stripes in a cell (max 35)");r+=N(t.length)+t}return r}(ea,o),i=N(l.width)+l.data,c=N(n.width)+n.data;return[k.slice(0,-1),e,t,r,i,c,a,""].join("|")},importState:e=>{if(!e||!e.startsWith(k))throw Error("Invalid state payload");let t=e.split("|");if(t.length<7)throw Error("Corrupt state: missing segments");let r=A(t[1]);if(r!==o)throw Error("State size ".concat(r," does not match grid size ").concat(o));let l=t[3],n=t[4],a=t[5],i=t[6],s=function(e,t){let r=t*t;if(e.length!==r)throw Error("Corrupt state: number grid length mismatch");let l=x(t);for(let n=0;n<r;n++){let r=Math.floor(n/t),o=n%t;l[r][o]=A(e[n])||0}return l}(l,o),c=z(n,o),u=z(a,o),d=function(e,t){let r=Array.from({length:t},()=>Array.from({length:t},()=>[])),l=0;for(let n=0;n<t;n++)for(let o=0;o<t;o++){if(l>=e.length)throw Error("Corrupt state: truncated colors segment");let t=A(e[l]);l+=1;let a=e.slice(l,l+t);l+=t;let i=[];for(let e=0;e<a.length;e++){let t=j[a[e]];t&&i.push(t)}r[n][o]=i}return r}(i,o);et(s),el(c),eo(u),ei(d)}}),[ed,eu,ef,o,s,ee,er,en,ea]);let em=(0,n.useCallback)((e,t)=>Math.max(0,Math.min(t-1,e)),[]),ev=(0,n.useCallback)(e=>{let t=Y.current;if(!t)return;let r=t.getBoundingClientRect(),l=e.clientX-r.left,n=e.clientY-r.top;if(l<0||n<0||l>r.width||n>r.height)return;let a=em(Math.floor(l/r.width*o),o);return[em(Math.floor(n/r.height*o),o),a]},[o,em]),ex=(0,n.useCallback)(e=>{var t,r,l;let n=ev(e);if(!n)return;null==(t=Q.current)||t.focus();let[a,i]=n,s=e.ctrlKey||e.metaKey,c=e.shiftKey,u=s?ed.map(e=>e.slice()):g(o),d=u.map(e=>e.slice()),f=s?u[a][i]?"paint-erase":"paint-add":c?"rect":"paint-add",h={mode:f,start:[a,i],base:u,working:d,visited:new Set([a*o+i]),last:[a,i]};if("rect"===f)(d=g(o))[a][i]=!0,h.working=d,H([[a,i]]),ep(d),eb([a,i]);else if("paint-add"===f)d[a][i]=!0,h.working=d,H(s?e=>b([...e],[a,i]):[[a,i]]),ep(d.map(e=>e.slice())),eb([a,i]);else{d[a][i]=!1,h.working=d,H(e=>m(e,[a,i])),ep(d.map(e=>e.slice()));let e=p(q,[a,i]),t=q.filter(e=>{let[t,r]=e;return t!==a||r!==i});eb(e>0?q[e-1]:t[t.length-1])}Z.current=h,J.current=!0,null==(r=(l=e.currentTarget).setPointerCapture)||r.call(l,e.pointerId)},[ed,o,ep,eb,ev,q]),ew=(0,n.useCallback)(e=>{if(!Z.current)return;let t=ev(e);if(!t)return;let[r,l]=t,n=Z.current;if("rect"===n.mode){let[e,t]=n.start,a=Math.min(e,r),i=Math.max(e,r),s=Math.min(t,l),c=Math.max(t,l),u=g(o);for(let e=a;e<=i;e++)for(let t=s;t<=c;t++)u[e][t]=!0;n.working=u,n.last=[r,l],H(v(u)),ep(u)}else if("paint-add"===n.mode){let e=r*o+l;n.visited.has(e)||(n.visited.add(e),n.working[r][l]=!0,n.last=[r,l],H(e=>b([...e],[r,l])),ep(n.working.map(e=>e.slice())))}else{let e=r*o+l;if(!n.visited.has(e)&&(n.visited.add(e),n.working[r][l])){var a;n.working[r][l]=!1,n.last=[r,l],H(e=>m(e,[r,l])),ep(n.working.map(e=>e.slice())),eu&&(a=[r,l],eu[0]===a[0]&&eu[1]===a[1])&&H(e=>{let t=m(e,[r,l]);return eb(t.length?t[t.length-1]:void 0),t})}}},[o,ep,ev,eu,eb]),ey=(0,n.useCallback)(()=>{var e;if(!Z.current)return;let t=Z.current;("rect"===t.mode||"paint-add"===t.mode)&&eb(null!=(e=t.last)?e:t.start),Z.current=null,J.current=!1},[eb]),ek=(0,n.useCallback)(e=>{ey();try{e.currentTarget.releasePointerCapture(e.pointerId)}catch(e){}},[ey]),eC=(0,n.useCallback)(()=>{J.current&&ey()},[ey]),ej=(0,n.useCallback)(e=>{let t=y(ed,eu);0!==t.length&&et(r=>{let l=r.map(e=>e.slice());for(let[r,n]of t)ef(r,n)||(l[r][n]=e>0?e:0);return l})},[ed,eu,ef]),eN=(0,n.useCallback)((e,t)=>{if(t<1||t>o)return;let r=y(ed,eu);r.length&&e(e=>{let l=e.map(e=>e.map(e=>e.slice()));for(let[e,n]of r)ef(e,n)||(l[e][n][t]=+!l[e][n][t]);return l})},[ed,eu,ef,o]),eA=(0,n.useCallback)(e=>{let t=y(ed,eu);t.length&&e(e=>{let r=e.map(e=>e.map(e=>e.slice()));for(let[e,l]of t)ef(e,l)||r[e][l].fill(0);return r})},[ed,eu,ef]),eS=(0,n.useCallback)((e,t)=>{let r=eu;r||(r=h(ed)?v(ed)[0]:[0,0]);let l=c({row:r[0],col:r[1]},e,t,o),n=[l.row,l.col];eb(n),ep(function(e,t,r){let l=g(e);return l[t][r]=!0,l}(o,n[0],n[1])),H([n])},[eu,ed,o,eb,ep]),eM=(0,n.useCallback)(e=>{let t=e.key;if("Escape"===t){e.preventDefault(),ep(g(o)),eb(void 0),H([]);return}if("ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t){e.preventDefault(),"ArrowUp"===t&&eS(-1,0),"ArrowDown"===t&&eS(1,0),"ArrowLeft"===t&&eS(0,-1),"ArrowRight"===t&&eS(0,1);return}if("Backspace"===t||"Delete"===t||"0"===t){e.preventDefault(),"center"===R?eA(el):"corner"===R?eA(eo):ej(0);return}if(/^[1-9]$/.test(t)){let r=parseInt(t,10);r>=1&&r<=Math.min(9,o)&&(e.preventDefault(),"center"===R?eN(el,r):"corner"===R?eN(eo,r):ej(r))}},[ep,o,eb,eS,R,eA,ej,eN]);return(0,n.useEffect)(()=>{Q.current&&(h(ed)||eu)&&document.activeElement!==Q.current&&Q.current.focus()},[R,ed,eu]),(0,l.jsx)("div",{ref:Q,tabIndex:0,onKeyDown:eM,className:"outline-none focus:outline-none",children:(0,l.jsx)("table",{role:"grid","aria-rowcount":o,"aria-colcount":o,children:(0,l.jsx)("tbody",{ref:Y,className:a,onPointerDown:ex,onPointerMove:ew,onPointerUp:ek,onPointerLeave:eC,...G,children:Array.from({length:o}).map((e,t)=>(0,l.jsx)("tr",{role:"row",children:Array.from({length:o}).map((e,r)=>{var n,a,g,h,p,b,m,v;let x=t>0&&eg(c({row:t,col:r},-1,0,o).row,c({row:t,col:r},-1,0,o).col),w=r<o-1&&eg(c({row:t,col:r},0,1,o).row,c({row:t,col:r},0,1,o).col),y=t<o-1&&eg(c({row:t,col:r},1,0,o).row,c({row:t,col:r},1,0,o).col),k=r>0&&eg(c({row:t,col:r},0,-1,o).row,c({row:t,col:r},0,-1,o).col),C=r>0&&t>0&&!eg(t-1,r-1)&&x&&k,j=r<o-1&&t>0&&!eg(t-1,r+1)&&x&&w,N=r>0&&t<o-1&&!eg(t+1,r-1)&&y&&k,A=r<o-1&&t<o-1&&!eg(t+1,r+1)&&y&&w,S=eg(t,r),M=null!=(b=null==s||null==(n=s[t])?void 0:n[r])?b:0,z=null!=(m=null==ee||null==(a=ee[t])?void 0:a[r])?m:0,E=M>0?M:z>0?z:"",I=M||z||null==er||null==(g=er[t])?void 0:g[r],R=M||z||null==en||null==(h=en[t])?void 0:h[r],P=Math.min(9,o),_=[],D=[];if(I)for(let e=1;e<=P;e++)I[e]&&_.push(e);if(R)for(let e=1;e<=P;e++)R[e]&&D.push(e);let T=_.length>0?u.slice(0,8):u,U=null!=(v=null==ea||null==(p=ea[t])?void 0:p[r])?v:[];return(0,l.jsx)("td",{role:"gridcell",className:eh(t,r),children:(0,l.jsxs)("div",{"aria-selected":S,"aria-readonly":ef(t,r)||void 0,className:i("relative flex size-full cursor-pointer items-center justify-center text-2xl select-none","[--sel:theme(colors.blue.300)] dark:[--sel:theme(colors.blue.800)]",ef(t,r)?"text-foreground":"text-blue-700 dark:text-blue-400 font-bold font-serif"),children:[U.length>0&&(0,l.jsx)("div",{className:"absolute inset-0 overflow-hidden flex pointer-events-none",children:U.map((e,t)=>(0,l.jsx)("div",{className:i("h-full flex-1",f[e])},t))}),S&&!k&&(0,l.jsx)("span",{className:"pointer-events-none absolute top-0 bottom-0 left-0 w-[4px]",style:{background:"var(--sel)"}}),S&&!w&&(0,l.jsx)("span",{className:"pointer-events-none absolute top-0 right-0 bottom-0 w-[4px]",style:{background:"var(--sel)"}}),S&&!x&&(0,l.jsx)("span",{className:"pointer-events-none absolute top-0 right-0 left-0 h-[4px]",style:{background:"var(--sel)"}}),S&&!y&&(0,l.jsx)("span",{className:"pointer-events-none absolute right-0 bottom-0 left-0 h-[4px]",style:{background:"var(--sel)"}}),S&&C&&(0,l.jsx)("span",{className:"absolute top-0 left-0 size-[4px] rounded-br-xs bg-(--sel)"}),S&&j&&(0,l.jsx)("span",{className:"absolute top-0 right-0 size-[4px] rounded-bl-xs bg-(--sel)"}),S&&N&&(0,l.jsx)("span",{className:"absolute bottom-0 left-0 size-[4px] rounded-tr-xs bg-(--sel)"}),S&&A&&(0,l.jsx)("span",{className:"absolute right-0 bottom-0 size-[4px] rounded-tl-xs bg-(--sel)"}),""!==E&&(0,l.jsx)("span",{className:"absolute",children:E}),""===E&&D.length>0&&(0,l.jsx)(l.Fragment,{children:D.slice(0,9).map((e,t)=>{let r=T[t];return r?(0,l.jsx)("span",{className:i(d[r],"text-xxs leading-none font-semibold tracking-tight"),children:e},"".concat(e,"-").concat(t)):null})}),""===E&&_.length>0&&(0,l.jsx)("span",{className:"absolute text-xs leading-none font-semibold tracking-tight",children:_.join("")})]})},r)})},t))})})})}),I=n.memo(E);var R=r(6037),P=r(3101);let _=(0,P.F)("\n    inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap\n    transition-[color,box-shadow] outline-none\n    hover:bg-muted hover:text-muted-foreground\n    focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\n    disabled:pointer-events-none disabled:opacity-50\n    aria-invalid:border-destructive aria-invalid:ring-destructive/20\n    data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\n    dark:aria-invalid:ring-destructive/40\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  ",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function D(e){let{className:t,variant:r,size:n,...o}=e;return(0,l.jsx)(R.b,{"data-slot":"toggle",className:i(_({variant:r,size:n,className:t})),...o})}var T=r(8514),U=r(2794),L=r(5523),O=r(9295),B=r(5022),F=r(653),G=r(6701),K=r(6673);let V=(0,P.F)("\n    inline-flex shrink-0 items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap\n    transition-all outline-none\n    focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\n    disabled:pointer-events-none disabled:opacity-50\n    aria-invalid:border-destructive aria-invalid:ring-destructive/20\n    dark:aria-invalid:ring-destructive/40\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"\n          bg-destructive text-white shadow-xs\n          hover:bg-destructive/90\n          focus-visible:ring-destructive/20\n          dark:bg-destructive/60 dark:focus-visible:ring-destructive/40\n        ",outline:"\n          border bg-background shadow-xs\n          hover:bg-accent hover:text-accent-foreground\n          dark:border-input dark:bg-input/30 dark:hover:bg-input/50\n        ",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5",lg:"has-[>svg ]:px-4 h-10 rounded-md px-6",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function W(e){let{className:t,variant:r,size:n,asChild:o=!1,...a}=e,s=o?K.DX:"button";return(0,l.jsx)(s,{"data-slot":"button",className:i(V({variant:r,size:n,className:t})),...a})}var X=r(7268);function $(e){let{className:t,orientation:r="horizontal",decorative:n=!0,...o}=e;return(0,l.jsx)(X.b,{"data-slot":"separator",decorative:n,orientation:r,className:i("\n          shrink-0 bg-border\n          data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full\n          data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\n        ",t),...o})}let q={1:"tl",2:"tc",3:"tr",4:"lc",5:"cc",6:"rc",7:"bl",8:"bc",9:"br"};function H(){let[e,t]=(0,n.useState)(),[r,o]=(0,n.useState)(Array.from({length:9},()=>Array(9).fill(!1))),[a,s]=(0,n.useState)(null),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{k()},[]);let u=["red","orange","yellow","green","cyan","blue","violet","pink","transparent"],g=[1,2,3,4,5,6,7,8,9,0],h="color"===a,p="center"===a,b="corner"===a,m=async()=>{try{var e,t;let r=null==(e=c.current)?void 0:e.exportState();if(!r)return;if("undefined"!=typeof navigator){let e=navigator;if("function"==typeof e.share)try{await e.share({title:"Sudoku",text:r});return}catch(e){}}if("undefined"!=typeof navigator&&(null==(t=navigator.clipboard)?void 0:t.writeText))return void await navigator.clipboard.writeText(r);let l=new Blob([r],{type:"text/plain"}),n=URL.createObjectURL(l),o=document.createElement("a");o.href=n,o.download="sudoku.sg1.txt",document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(n)}catch(e){console.error(e)}},v=(0,n.useRef)(null),x=e=>{try{var t;if(!(null==e?void 0:e.startsWith("SG1|")))throw Error("Invalid payload");null==(t=c.current)||t.importState(e)}catch(e){console.error(e),alert(e.message||"Failed to import")}},w=async()=>{try{let e=await navigator.clipboard.readText();x(e)}catch(t){let e=prompt("Paste your SG1 payload here:");e&&x(e)}},y=async e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];r&&(x((await r.text()).trim()),e.target.value="")},k=()=>{try{let e=new URL(window.location.href),t=e.searchParams.get("state")||e.hash.replace(/^#state=/,"");if(!t)return;x(decodeURIComponent(t))}catch(e){console.error(e)}};return(0,l.jsxs)("div",{className:"space-y-4 p-8",children:[(0,l.jsx)(I,{ref:c,presetGrid:[[0,0,0,1,0,2,0,0,0],[0,6,0,0,0,0,0,7,0],[0,0,8,0,0,0,9,0,0],[4,0,0,0,0,0,0,0,3],[0,5,0,0,0,7,0,0,0],[2,0,0,0,8,0,0,0,1],[0,0,9,0,0,0,8,0,5],[0,7,0,0,0,0,0,6,0],[0,0,0,3,0,4,0,0,0]],pencilMode:"center"===a?"center":"corner"===a?"corner":null,currentCell:e,selectedCells:r,onSelectionChange:o,onCurrentCellChange:t,onCellSelect:e=>{let{row:t,col:r}=e;console.log("Clicked:",t,r)}}),(0,l.jsxs)("div",{className:"flex w-fit flex-col gap-2 rounded-md border p-2",children:[(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)(D,{variant:"outline","aria-label":"Toggle Center Notes Mode",pressed:"center"===a,onPressedChange:e=>s(e?"center":null),children:(0,l.jsx)(T.A,{})}),(0,l.jsx)(D,{variant:"outline","aria-label":"Toggle Corner Notes Mode",pressed:"corner"===a,onPressedChange:e=>s(e?"corner":null),children:(0,l.jsx)(U.A,{})}),(0,l.jsx)(D,{variant:"outline","aria-label":"Toggle Color Annotation Mode",pressed:"color"===a,onPressedChange:e=>s(e?"color":null),children:(0,l.jsx)(L.A,{})})]}),(0,l.jsx)($,{}),(0,l.jsx)("div",{className:"grid w-fit grid-cols-3 gap-1",children:Array.from({length:10}).map((e,t)=>{let r=h&&9===t,n=h?r?"Clear color from selection":"Apply ".concat(u[t]," color to selection"):p?"Toggle center note ".concat(g[t]):b?"Toggle corner note ".concat(g[t]):"Set digit ".concat(g[t]),o=h?r?"Clear all stripes":"Toggle ".concat(u[t]," stripe"):p||b?0===g[t]?"Clear notes":"".concat(p?"Center":"Corner"," note ").concat(g[t]):0===g[t]?"Clear value":"Place ".concat(g[t]),a=(()=>{if(0===g[t])return(0,l.jsx)(O.A,{});if(h){let e=u[t];return(0,l.jsx)("span",{"aria-hidden":!0,className:"size-4 rounded-xs border border-foreground/10 ".concat(f[e])})}let e=g[t];if(b){let t=q[e];return(0,l.jsx)("span",{className:i(d[t],"font-serif text-xxs leading-none font-semibold tracking-tight"),children:e})}return(0,l.jsx)("span",{className:p?"text-xs font-serif":"text-base",children:e})})();return(0,l.jsx)(W,{size:"icon",variant:"outline","aria-label":n,title:o,className:i("relative",0===g[t]?"col-start-2":void 0),onClick:()=>(e=>{var t,r,l,n,o,a,i;if(h){if(e<u.length){let t=u[e];null==(r=c.current)||r.annotateColor(t)}else null==(l=c.current)||l.annotateClear();return}let s=g[e];return p?void(0===s?null==(n=c.current)||n.clearCenterNotes():null==(o=c.current)||o.toggleCenterNote(s)):b?void(0===s?null==(a=c.current)||a.clearCornerNotes():null==(i=c.current)||i.toggleCornerNote(s)):void(null==(t=c.current)||t.setDigit(s))})(t),children:a},t)})}),(0,l.jsx)($,{})]}),(0,l.jsxs)("div",{className:"flex w-fit gap-1 rounded-md border p-2",children:[(0,l.jsx)(W,{size:"icon",variant:"outline","aria-label":"Share / export grid",title:"Share / export grid",onClick:m,children:(0,l.jsx)(B.A,{})}),(0,l.jsx)(W,{size:"icon",variant:"outline","aria-label":"Import from clipboard / paste",title:"Import from clipboard / paste",onClick:w,children:(0,l.jsx)(F.A,{})}),(0,l.jsx)(W,{size:"icon",variant:"outline","aria-label":"Import from file",title:"Import from file",onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},children:(0,l.jsx)(G.A,{})}),(0,l.jsx)("input",{ref:v,type:"file",accept:".txt,.sg1",className:"hidden",onChange:y})]})]})}},7767:(e,t,r)=>{Promise.resolve().then(r.bind(r,3018))}},e=>{e.O(0,[487,441,255,358],()=>e(e.s=7767)),_N_E=e.O()}]);