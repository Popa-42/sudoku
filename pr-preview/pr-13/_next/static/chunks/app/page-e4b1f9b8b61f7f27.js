(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7767:(e,t,r)=>{Promise.resolve().then(r.bind(r,9677))},9677:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ez});var n=r(5155),l=r(2115),a=r(2821),o=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}let i=(e,t,r)=>Math.min(r,Math.max(t,e));function c(e,t,r,n){let l=null!=n?n-1:1/0;return{row:i(e.row+t,0,l),col:i(e.col+r,0,l)}}let d=["tl","tr","bl","br","tc","rc","bc","lc","cc"],u={tl:"absolute top-1 left-1 translate-x-0.5 translate-y-0.5",tr:"absolute top-1 right-1 -translate-x-0.5 translate-y-0.5",bl:"absolute bottom-1 left-1 translate-x-0.5 -translate-y-0.5",br:"absolute bottom-1 right-1 -translate-x-0.5 -translate-y-0.5",tc:"absolute top-1 left-1/2 -translate-x-1/2 translate-y-0.5",rc:"absolute right-1 top-1/2 -translate-y-1/2 -translate-x-0.5",bc:"absolute bottom-1 left-1/2 -translate-x-1/2 -translate-y-0.5",lc:"absolute left-1 top-1/2 -translate-y-1/2 translate-x-0.5",cc:"absolute inset-1 flex items-center justify-center"},f={red:"bg-red-200 dark:bg-red-500/40",orange:"bg-orange-200 dark:bg-orange-500/40",yellow:"bg-yellow-200 dark:bg-yellow-500/40",green:"bg-green-200 dark:bg-green-500/40",cyan:"bg-cyan-200 dark:bg-cyan-500/40",blue:"bg-blue-200 dark:bg-blue-500/40",violet:"bg-violet-200 dark:bg-violet-500/40",pink:"bg-pink-200 dark:bg-pink-500/40",transparent:"bg-transparent"};function h(e){return Array.from({length:e},()=>Array(e).fill(!1))}function g(e){return e.some(e=>e.some(Boolean))}function x(e,t){return e.findIndex(e=>{let[r,n]=e;return r===t[0]&&n===t[1]})}function p(e,t){return -1===x(e,t)&&e.push(t),e}function m(e,t){return e.filter(e=>{let[r,n]=e;return r!==t[0]||n!==t[1]})}function b(e){let t=[];for(let r=0;r<e.length;r++)for(let n=0;n<e[r].length;n++)e[r][n]&&t.push([r,n]);return t}function v(e){return Array.from({length:e},()=>Array(e).fill(0))}function j(e){return Array.from({length:e},()=>Array.from({length:e},()=>Array(e+1).fill(0)))}function k(e,t){return g(e)?b(e):t?[t]:[]}let y="SG1|",w={red:"r",orange:"o",yellow:"y",green:"g",blue:"b",cyan:"c",violet:"v",pink:"p",transparent:"t"},C=Object.fromEntries(Object.entries(w).map(e=>{let[t,r]=e;return[r,t]}));function N(e){return e.toString(36)}function S(e){return parseInt(e,36)}function z(e,t){let r=Array(t*t),n=0;for(let o=0;o<t;o++)for(let s=0;s<t;s++){var l,a;let t=null!=(a=null==e||null==(l=e[o])?void 0:l[s])?a:0;if(t<0||t>=36)throw Error("Value out of encodable range (0..35)");r[n++]=N(t)}return r.join("")}function A(e,t){let r=t*t;if(e.length!==r)throw Error("Corrupt state: number grid length mismatch");let n=v(t);for(let l=0;l<r;l++){let r=Math.floor(l/t),a=l%t;n[r][a]=S(e[l])||0}return n}function E(e,t){let r=Math.max(1,Math.max(0,Math.pow(2,t)-1).toString(36).length),n=Array(t*t),l=0;for(let o=0;o<t;o++)for(let s=0;s<t;s++){var a;let i=0,c=null==e||null==(a=e[o])?void 0:a[s];if(c)for(let e=1;e<=t;e++)c[e]&&(i|=1<<e-1);n[l++]=i.toString(36).padStart(r,"0")}return{width:r,data:n.join("")}}function M(e,t){if(!e||e.length<1)throw Error("Corrupt state: empty mask payload");let r=S(e[0]);if(r<1||r>10)throw Error("Corrupt state: invalid mask width");let n=e.slice(1),l=t*t*r;if(n.length!==l)throw Error("Corrupt state: mask body length mismatch");let a=j(t),o=0;for(let e=0;e<t;e++)for(let l=0;l<t;l++){let s=n.slice(o,o+r);o+=r;let i=parseInt(s,36)||0;for(let r=1;r<=t;r++)a[e][l][r]=i>>r-1&1?1:0}return a}function R(e,t){let r="";for(let a=0;a<t;a++)for(let o=0;o<t;o++){var n,l;let t=(null!=(l=null==e||null==(n=e[a])?void 0:n[o])?l:[]).map(e=>{var t;return null!=(t=w[e])?t:""}).join("");if(t.length>=36)throw Error("Too many color stripes in a cell (max 35)");r+=N(t.length)+t}return r}function _(e,t){let r=Array.from({length:t},()=>Array.from({length:t},()=>[])),n=0;for(let l=0;l<t;l++)for(let a=0;a<t;a++){if(n>=e.length)throw Error("Corrupt state: truncated colors segment");let t=S(e[n]);n+=1;let o=e.slice(n,n+t);n+=t;let s=[];for(let e=0;e<o.length;e++){let t=C[o[e]];t&&s.push(t)}r[l][a]=s}return r}let L=l.forwardRef(function(e,t){var r;let{size:a=9,className:o,presetGrid:i,editedGrid:w,pencilGrid:C,pencilMode:L=null,currentCell:O,selectedCells:T,onCellSelect:D,onSelectionChange:P,onCurrentCellChange:U,box:I,regions:F,cellClassName:K,dividerClassName:G="border-foreground dark:border-muted",...V}=e;if(!Number.isInteger(a)||a<=0)throw Error("Size must be a positive integer.");if(F&&(F.length!==a||F.some(e=>e.length!==a)))throw Error('Invalid "regions": expected a size\xd7size matrix.');let X=(0,l.useMemo)(()=>h(a),[a]),[B,Z]=(0,l.useState)(void 0),[W,Y]=(0,l.useState)(X),[H,q]=(0,l.useState)([]),$=(0,l.useRef)(null),J=(0,l.useRef)(null),Q=(0,l.useRef)(!1),ee=(0,l.useRef)(null),[et,er]=(0,l.useState)(()=>v(a)),[en,el]=(0,l.useState)(()=>j(a)),[ea,eo]=(0,l.useState)(()=>j(a)),[es,ei]=(0,l.useState)(()=>Array.from({length:a},()=>Array.from({length:a},()=>[]))),[ec,ed]=(0,l.useState)(()=>null!=i?i:v(a)),eu=(0,l.useRef)([]),ef=(0,l.useRef)(-1),eh=(0,l.useRef)(0),eg=(0,l.useCallback)(()=>{let e=N(a),t=z(null!=ec?ec:v(a),a),r=z(et,a),n=E(en,a),l=E(ea,a),o=R(es,a),s=N(n.width)+n.data,i=N(l.width)+l.data;return[y.slice(0,-1),e,t,r,s,i,o,""].join("|")},[a,ec,et,en,ea,es]),ex=(0,l.useCallback)(e=>{if(eh.current>0)return;let t=eu.current,r=ef.current;r>=0&&t[r]===e||(r<t.length-1&&t.splice(r+1),t.push(e),t.length>200&&t.splice(0,t.length-200),ef.current=t.length-1)},[]);(0,l.useEffect)(()=>{ex(eg())},[et,en,ea,es]),(0,l.useEffect)(()=>{ed(null!=i?i:v(a))},[a,i]),(0,l.useEffect)(()=>{Y(X),Z(void 0),q([]),er(v(a)),el(j(a)),eo(j(a)),ei(Array.from({length:a},()=>Array.from({length:a},()=>[]))),eu.current=[],ef.current=-1},[a,X]);let ep=(0,l.useMemo)(()=>null!=I?I:function(e){if(9===e)return{rows:3,cols:3};let t=Math.floor(Math.sqrt(e));return t>1&&e%t==0?{rows:t,cols:e/t}:{rows:e,cols:1}}(a),[I,a]),em=(0,l.useMemo)(()=>{if(F)return(e,t)=>F[e][t];let e=ep.cols,t=ep.rows,r=Math.ceil(a/e);return(n,l)=>Math.floor(n/t)*r+Math.floor(l/e)},[F,ep,a]),eb=null!=O?O:B,ev=!(r=null!=T?T:W)||r.length!==a||r.some(e=>e.length!==a)?h(a):r,ej=(0,l.useCallback)((e,t)=>{var r,n;return(null!=(n=null==ec||null==(r=ec[e])?void 0:r[t])?n:0)>0},[ec]);(0,l.useEffect)(()=>{g(ev)||(O||Z(void 0),q([]),null==U||U(void 0))},[ev,O,U]);let ek=(0,l.useCallback)((e,t)=>{var r;return!!(null==ev||null==(r=ev[e])?void 0:r[t])},[ev]),ey=(0,l.useCallback)((e,t)=>{let r=["size-10","border","border-foreground","dark:border-muted","text-center","select-none","cursor-pointer"];K&&r.push(K);let n=[];if(F){let r=em(e,t),l=0===e||em(e-1,t)!==r,o=0===t||em(e,t-1)!==r,s=t===a-1||em(e,t+1)!==r,i=e===a-1||em(e+1,t)!==r;l&&n.push("border-t-2",G),o&&n.push("border-l-2",G),s&&n.push("border-r-2",G),i&&n.push("border-b-2",G)}else{let r=0===e||e%ep.rows==0,l=0===t||t%ep.cols==0,o=t===a-1||(t+1)%ep.cols==0,s=e===a-1||(e+1)%ep.rows==0;r&&n.push("border-t-2",G),l&&n.push("border-l-2",G),o&&n.push("border-r-2",G),s&&n.push("border-b-2",G)}return s(r.join(" "),n.join(" "))},[F,em,a,ep,G,K]),ew=(0,l.useCallback)(e=>{T||Y(e),null==P||P(e)},[T,P]),eC=(0,l.useCallback)(e=>{O||Z(e),null==U||U(e)},[O,U]);(0,l.useImperativeHandle)(t,()=>({annotateColor:e=>{let t=k(ev,eb);t.length&&ei(r=>{let n=r.map(e=>e.map(e=>e.slice()));for(let[r,l]of t){let t=n[r][l],a=t.indexOf(e);a>=0?t.splice(a,1):t.push(e)}return n})},annotateClear:()=>{let e=k(ev,eb);e.length&&ei(t=>{let r=t.map(e=>e.map(e=>e.slice()));for(let[t,n]of e)r[t][n]=[];return r})},setDigit:e=>{let t=k(ev,eb);t.length&&er(r=>{let n=r.map(e=>e.slice());for(let[r,l]of t)ej(r,l)||(n[r][l]=e>0?e:0);return n})},toggleCenterNote:e=>{if(e<1||e>a)return;let t=k(ev,eb);t.length&&el(r=>{let n=r.map(e=>e.map(e=>e.slice()));for(let[r,l]of t)ej(r,l)||(n[r][l][e]=+!n[r][l][e]);return n})},toggleCornerNote:e=>{if(e<1||e>a)return;let t=k(ev,eb);t.length&&eo(r=>{let n=r.map(e=>e.map(e=>e.slice()));for(let[r,l]of t)ej(r,l)||(n[r][l][e]=+!n[r][l][e]);return n})},clearCenterNotes:()=>{let e=k(ev,eb);e.length&&el(t=>{let r=t.map(e=>e.map(e=>e.slice()));for(let[t,n]of e)ej(t,n)||r[t][n].fill(0);return r})},clearCornerNotes:()=>{let e=k(ev,eb);e.length&&eo(t=>{let r=t.map(e=>e.map(e=>e.slice()));for(let[t,n]of e)ej(t,n)||r[t][n].fill(0);return r})},exportState:()=>{let e=N(a),t=z(null!=ec?ec:v(a),a),r=z(et,a),n=E(en,a),l=E(ea,a),o=R(es,a),s=N(n.width)+n.data,i=N(l.width)+l.data;return[y.slice(0,-1),e,t,r,s,i,o,""].join("|")},importState:e=>{if(!e||!e.startsWith(y))throw Error("Invalid state payload");let t=e.split("|");if(t.length<7)throw Error("Corrupt state: missing segments");let r=S(t[1]);if(r!==a)throw Error("State size ".concat(r," does not match grid size ").concat(a));let n=t[2],l=t[3],o=t[4],s=t[5],i=t[6];eh.current++;let c=A(n,a),d=A(l,a),u=M(o,a),f=M(s,a),h=_(i,a);for(let e=0;e<a;e++)for(let t=0;t<a;t++){var g,x;(null!=(x=null==c||null==(g=c[e])?void 0:g[t])?x:0)>0&&(d[e][t]=0,u[e][t].fill(0),f[e][t].fill(0))}ed(c),er(d),el(u),eo(f),ei(h),setTimeout(()=>{eh.current--},0)},reset:()=>{er(v(a)),el(j(a)),eo(j(a)),ei(Array.from({length:a},()=>Array.from({length:a},()=>[])))},undo:()=>{let e=eu.current;if(0===e.length)return!1;let t=ef.current;if(t<=0)return!1;let r=e[t-1];eh.current++;try{let e=r.split("|"),n=e[3],l=e[4],o=e[5],s=e[6];er(A(n,a)),el(M(l,a)),eo(M(o,a)),ei(_(s,a)),ef.current=t-1}finally{setTimeout(()=>{eh.current--},0)}return!0},redo:()=>{let e=eu.current;if(0===e.length)return!1;let t=ef.current;if(t>=e.length-1)return!1;let r=e[t+1];eh.current++;try{let e=r.split("|"),n=e[3],l=e[4],o=e[5],s=e[6];er(A(n,a)),el(M(l,a)),eo(M(o,a)),ei(_(s,a)),ef.current=t+1}finally{setTimeout(()=>{eh.current--},0)}return!0}}),[ev,eb,ej,a,ec,et,en,ea,es]);let eN=(0,l.useCallback)((e,t)=>Math.max(0,Math.min(t-1,e)),[]),eS=(0,l.useCallback)(e=>{let t=J.current;if(!t)return;let r=t.getBoundingClientRect(),n=e.clientX-r.left,l=e.clientY-r.top;if(n<0||l<0||n>r.width||l>r.height)return;let o=eN(Math.floor(n/r.width*a),a);return[eN(Math.floor(l/r.height*a),a),o]},[a,eN]),ez=(0,l.useCallback)(e=>{var t,r,n;let l=eS(e);if(!l)return;null==(t=$.current)||t.focus();let[o,s]=l,i=e.ctrlKey||e.metaKey,c=e.shiftKey,d=i?ev.map(e=>e.slice()):h(a),u=d.map(e=>e.slice()),f=i?d[o][s]?"paint-erase":"paint-add":c?"rect":"paint-add",g={mode:f,start:[o,s],base:d,working:u,visited:new Set([o*a+s]),last:[o,s]};if("rect"===f)(u=h(a))[o][s]=!0,g.working=u,q([[o,s]]),ew(u),eC([o,s]);else if("paint-add"===f)u[o][s]=!0,g.working=u,q(i?e=>p([...e],[o,s]):[[o,s]]),ew(u.map(e=>e.slice())),eC([o,s]);else{u[o][s]=!1,g.working=u,q(e=>m(e,[o,s])),ew(u.map(e=>e.slice()));let e=x(H,[o,s]),t=H.filter(e=>{let[t,r]=e;return t!==o||r!==s});eC(e>0?H[e-1]:t[t.length-1])}ee.current=g,Q.current=!0,null==(r=(n=e.currentTarget).setPointerCapture)||r.call(n,e.pointerId)},[ev,a,ew,eC,eS,H]),eA=(0,l.useCallback)(e=>{if(!ee.current)return;let t=eS(e);if(!t)return;let[r,n]=t,l=ee.current;if("rect"===l.mode){let[e,t]=l.start,o=Math.min(e,r),s=Math.max(e,r),i=Math.min(t,n),c=Math.max(t,n),d=h(a);for(let e=o;e<=s;e++)for(let t=i;t<=c;t++)d[e][t]=!0;l.working=d,l.last=[r,n],q(b(d)),ew(d)}else if("paint-add"===l.mode){let e=r*a+n;l.visited.has(e)||(l.visited.add(e),l.working[r][n]=!0,l.last=[r,n],q(e=>p([...e],[r,n])),ew(l.working.map(e=>e.slice())))}else{let e=r*a+n;if(!l.visited.has(e)&&(l.visited.add(e),l.working[r][n])){var o;l.working[r][n]=!1,l.last=[r,n],q(e=>m(e,[r,n])),ew(l.working.map(e=>e.slice())),eb&&(o=[r,n],eb[0]===o[0]&&eb[1]===o[1])&&q(e=>{let t=m(e,[r,n]);return eC(t.length?t[t.length-1]:void 0),t})}}},[a,ew,eS,eb,eC]),eE=(0,l.useCallback)(()=>{var e;if(!ee.current)return;let t=ee.current;("rect"===t.mode||"paint-add"===t.mode)&&eC(null!=(e=t.last)?e:t.start),ee.current=null,Q.current=!1},[eC]),eM=(0,l.useCallback)(e=>{eE();try{e.currentTarget.releasePointerCapture(e.pointerId)}catch(e){}},[eE]),eR=(0,l.useCallback)(()=>{Q.current&&eE()},[eE]),e_=(0,l.useCallback)(e=>{let t=k(ev,eb);0!==t.length&&er(r=>{let n=r.map(e=>e.slice());for(let[r,l]of t)ej(r,l)||(n[r][l]=e>0?e:0);return n})},[ev,eb,ej]),eL=(0,l.useCallback)((e,t)=>{if(t<1||t>a)return;let r=k(ev,eb);r.length&&e(e=>{let n=e.map(e=>e.map(e=>e.slice()));for(let[e,l]of r)ej(e,l)||(n[e][l][t]=+!n[e][l][t]);return n})},[ev,eb,ej,a]),eO=(0,l.useCallback)(e=>{let t=k(ev,eb);t.length&&e(e=>{let r=e.map(e=>e.map(e=>e.slice()));for(let[e,n]of t)ej(e,n)||r[e][n].fill(0);return r})},[ev,eb,ej]),eT=(0,l.useCallback)((e,t)=>{let r=eb;r||(r=g(ev)?b(ev)[0]:[0,0]);let n=c({row:r[0],col:r[1]},e,t,a),l=[n.row,n.col];eC(l),ew(function(e,t,r){let n=h(e);return n[t][r]=!0,n}(a,l[0],l[1])),q([l])},[eb,ev,a,eC,ew]),eD=(0,l.useCallback)(e=>{let t=e.key;if("Escape"===t){e.preventDefault(),ew(h(a)),eC(void 0),q([]);return}if("ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t){e.preventDefault(),"ArrowUp"===t&&eT(-1,0),"ArrowDown"===t&&eT(1,0),"ArrowLeft"===t&&eT(0,-1),"ArrowRight"===t&&eT(0,1);return}if("Backspace"===t||"Delete"===t||"0"===t){e.preventDefault(),"center"===L?eO(el):"corner"===L?eO(eo):e_(0);return}if(/^[1-9]$/.test(t)){let r=parseInt(t,10);r>=1&&r<=Math.min(9,a)&&(e.preventDefault(),"center"===L?eL(el,r):"corner"===L?eL(eo,r):e_(r))}},[ew,a,eC,eT,L,eO,e_,eL]);return(0,l.useEffect)(()=>{$.current&&(g(ev)||eb)&&document.activeElement!==$.current&&$.current.focus()},[L,ev,eb]),(0,n.jsx)("div",{ref:$,tabIndex:0,onKeyDown:eD,className:"outline-none focus:outline-none",children:(0,n.jsx)("table",{role:"grid","aria-rowcount":a,"aria-colcount":a,children:(0,n.jsx)("tbody",{ref:J,className:o,onPointerDown:ez,onPointerMove:eA,onPointerUp:eM,onPointerLeave:eR,...V,children:Array.from({length:a}).map((e,t)=>(0,n.jsx)("tr",{role:"row",children:Array.from({length:a}).map((e,r)=>{var l,o,i,h,g,x,p,m;let b=t>0&&ek(c({row:t,col:r},-1,0,a).row,c({row:t,col:r},-1,0,a).col),v=r<a-1&&ek(c({row:t,col:r},0,1,a).row,c({row:t,col:r},0,1,a).col),j=t<a-1&&ek(c({row:t,col:r},1,0,a).row,c({row:t,col:r},1,0,a).col),k=r>0&&ek(c({row:t,col:r},0,-1,a).row,c({row:t,col:r},0,-1,a).col),y=r>0&&t>0&&!ek(t-1,r-1)&&b&&k,w=r<a-1&&t>0&&!ek(t-1,r+1)&&b&&v,C=r>0&&t<a-1&&!ek(t+1,r-1)&&j&&k,N=r<a-1&&t<a-1&&!ek(t+1,r+1)&&j&&v,S=ek(t,r),z=null!=(x=null==ec||null==(l=ec[t])?void 0:l[r])?x:0,A=null!=(p=null==et||null==(o=et[t])?void 0:o[r])?p:0,E=z>0?z:A>0?A:"",M=z||A||null==en||null==(i=en[t])?void 0:i[r],R=z||A||null==ea||null==(h=ea[t])?void 0:h[r],_=Math.min(9,a),L=[],O=[];if(M)for(let e=1;e<=_;e++)M[e]&&L.push(e);if(R)for(let e=1;e<=_;e++)R[e]&&O.push(e);let T=L.length>0?d.slice(0,8):d,D=null!=(m=null==es||null==(g=es[t])?void 0:g[r])?m:[];return(0,n.jsx)("td",{role:"gridcell",className:ey(t,r),children:(0,n.jsxs)("div",{"aria-selected":S,"aria-readonly":ej(t,r)||void 0,className:s("relative flex size-full cursor-pointer items-center justify-center text-2xl select-none","[--sel:theme(colors.blue.300)] dark:[--sel:theme(colors.blue.800)]",ej(t,r)?"text-foreground":"text-blue-700 dark:text-blue-400 font-bold font-serif"),children:[D.length>0&&(0,n.jsx)("div",{className:"absolute inset-0 overflow-hidden flex pointer-events-none",children:D.map((e,t)=>(0,n.jsx)("div",{className:s("h-full flex-1",f[e])},t))}),S&&(0,n.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 bg-white/20 dark:bg-black/10"}),S&&!k&&(0,n.jsx)("span",{className:"pointer-events-none absolute top-0 bottom-0 left-0 z-20 w-[4px]",style:{background:"var(--sel)"}}),S&&!v&&(0,n.jsx)("span",{className:"pointer-events-none absolute top-0 right-0 bottom-0 z-20 w-[4px]",style:{background:"var(--sel)"}}),S&&!b&&(0,n.jsx)("span",{className:"pointer-events-none absolute top-0 right-0 left-0 z-20 h-[4px]",style:{background:"var(--sel)"}}),S&&!j&&(0,n.jsx)("span",{className:"pointer-events-none absolute right-0 bottom-0 left-0 z-20 h-[4px]",style:{background:"var(--sel)"}}),S&&y&&(0,n.jsx)("span",{className:"absolute top-0 left-0 z-20 size-[4px] rounded-br-xs bg-(--sel)"}),S&&w&&(0,n.jsx)("span",{className:"absolute top-0 right-0 z-20 size-[4px] rounded-bl-xs bg-(--sel)"}),S&&C&&(0,n.jsx)("span",{className:"absolute bottom-0 left-0 z-20 size-[4px] rounded-tr-xs bg-(--sel)"}),S&&N&&(0,n.jsx)("span",{className:"absolute right-0 bottom-0 z-20 size-[4px] rounded-tl-xs bg-(--sel)"}),""!==E&&(0,n.jsx)("span",{className:"absolute",children:E}),""===E&&O.length>0&&(0,n.jsx)(n.Fragment,{children:O.slice(0,9).map((e,t)=>{let r=T[t];return r?(0,n.jsx)("span",{className:s(u[r],"text-xxs leading-none font-semibold tracking-tight"),children:e},"".concat(e,"-").concat(t)):null})}),""===E&&L.length>0&&(0,n.jsx)("span",{className:"absolute text-xs leading-none font-semibold tracking-tight",children:L.join("")})]})},r)})},t))})})})}),O=l.memo(L);var T=r(1887),D=r(3101);let P=(0,D.F)("\n    inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap\n    transition-[color,box-shadow] outline-none\n    hover:bg-muted hover:text-muted-foreground\n    focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\n    disabled:pointer-events-none disabled:opacity-50\n    aria-invalid:border-destructive aria-invalid:ring-destructive/20\n    data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\n    dark:aria-invalid:ring-destructive/40\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  ",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function U(e){let{className:t,variant:r,size:l,...a}=e;return(0,n.jsx)(T.b,{"data-slot":"toggle",className:s(P({variant:r,size:l,className:t})),...a})}var I=r(8514),F=r(2794),K=r(5523),G=r(9295),V=r(6701),X=r(2467);let B=(0,D.F)("\n    inline-flex shrink-0 items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap\n    transition-all outline-none\n    focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\n    disabled:pointer-events-none disabled:opacity-50\n    aria-invalid:border-destructive aria-invalid:ring-destructive/20\n    dark:aria-invalid:ring-destructive/40\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  ",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"\n          bg-destructive text-white shadow-xs\n          hover:bg-destructive/90\n          focus-visible:ring-destructive/20\n          dark:bg-destructive/60 dark:focus-visible:ring-destructive/40\n        ",outline:"\n          border bg-background shadow-xs\n          hover:bg-accent hover:text-accent-foreground\n          dark:border-input dark:bg-input/30 dark:hover:bg-input/50\n        ",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5",lg:"has-[>svg ]:px-4 h-10 rounded-md px-6",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Z(e){let{className:t,variant:r,size:l,asChild:a=!1,...o}=e,i=a?X.DX:"button";return(0,n.jsx)(i,{"data-slot":"button",className:s(B({variant:r,size:l,className:t})),...o})}var W=r(7268);function Y(e){let{className:t,orientation:r="horizontal",decorative:l=!0,...a}=e;return(0,n.jsx)(W.b,{"data-slot":"separator",decorative:l,orientation:r,className:s("\n          shrink-0 bg-border\n          data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full\n          data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px\n        ",t),...a})}var H=r(9511),q=r(5229);function $(e){let{...t}=e;return(0,n.jsx)(H.bL,{"data-slot":"dialog",...t})}function J(e){let{...t}=e;return(0,n.jsx)(H.ZL,{"data-slot":"dialog-portal",...t})}function Q(e){let{className:t,...r}=e;return(0,n.jsx)(H.hJ,{"data-slot":"dialog-overlay",className:s("\n          fixed inset-0 z-50 bg-black/50\n          data-[state=closed]:animate-out data-[state=closed]:fade-out-0\n          data-[state=open]:animate-in data-[state=open]:fade-in-0\n        ",t),...r})}function ee(e){let{className:t,children:r,showCloseButton:l=!0,...a}=e;return(0,n.jsxs)(J,{"data-slot":"dialog-portal",children:[(0,n.jsx)(Q,{}),(0,n.jsxs)(H.UC,{"data-slot":"dialog-content",className:s("\n            fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%]\n            gap-4 rounded-lg border bg-background p-6 shadow-lg duration-200\n            data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95\n            data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95\n            sm:max-w-lg\n          ",t),...a,children:[r,l&&(0,n.jsxs)(H.bm,{"data-slot":"dialog-close",className:"\n              absolute top-4 right-4 rounded-xs opacity-70 ring-offset-background transition-opacity\n              hover:opacity-100\n              focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:outline-hidden\n              disabled:pointer-events-none\n              data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\n              [&_svg]:pointer-events-none [&_svg]:shrink-0\n              [&_svg:not([class*='size-'])]:size-4\n            ",children:[(0,n.jsx)(q.A,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function et(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"dialog-header",className:s("flex flex-col gap-2 text-center sm:text-left",t),...r})}function er(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"dialog-footer",className:s("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function en(e){let{className:t,...r}=e;return(0,n.jsx)(H.hE,{"data-slot":"dialog-title",className:s("text-lg leading-none font-semibold",t),...r})}function el(e){let{className:t,...r}=e;return(0,n.jsx)(H.VY,{"data-slot":"dialog-description",className:s("text-sm text-muted-foreground",t),...r})}var ea=r(1300),eo=r(5917),es=r(9051),ei=r(7937);function ec(e){let{className:t,...r}=e;return(0,n.jsx)(ea.bL,{"data-slot":"menubar",className:s("flex h-9 items-center gap-1 rounded-md border bg-background p-1 shadow-xs",t),...r})}function ed(e){let{...t}=e;return(0,n.jsx)(ea.W1,{"data-slot":"menubar-menu",...t})}function eu(e){let{...t}=e;return(0,n.jsx)(ea.ZL,{"data-slot":"menubar-portal",...t})}function ef(e){let{...t}=e;return(0,n.jsx)(ea.z6,{"data-slot":"menubar-radio-group",...t})}function eh(e){let{className:t,...r}=e;return(0,n.jsx)(ea.l9,{"data-slot":"menubar-trigger",className:s("\n          flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none\n          focus:bg-accent focus:text-accent-foreground\n          data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\n        ",t),...r})}function eg(e){let{className:t,align:r="start",alignOffset:l=-4,sideOffset:a=8,...o}=e;return(0,n.jsx)(eu,{children:(0,n.jsx)(ea.UC,{"data-slot":"menubar-content",align:r,alignOffset:l,sideOffset:a,className:s("\n            z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border\n            bg-popover p-1 text-popover-foreground shadow-md\n            data-[side=bottom]:slide-in-from-top-2\n            data-[side=left]:slide-in-from-right-2\n            data-[side=right]:slide-in-from-left-2\n            data-[side=top]:slide-in-from-bottom-2\n            data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95\n            data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95\n          ",t),...o})})}function ex(e){let{className:t,inset:r,variant:l="default",...a}=e;return(0,n.jsx)(ea.q7,{"data-slot":"menubar-item","data-inset":r,"data-variant":l,className:s("\n          relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none\n          focus:bg-accent focus:text-accent-foreground\n          data-[disabled]:pointer-events-none data-[disabled]:opacity-50\n          data-[inset]:pl-8\n          data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10\n          data-[variant=destructive]:focus:text-destructive\n          dark:data-[variant=destructive]:focus:bg-destructive/20\n          [&_svg]:pointer-events-none [&_svg]:shrink-0\n          [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground\n          data-[variant=destructive]:*:[svg]:!text-destructive\n        ",t),...a})}function ep(e){let{className:t,children:r,checked:l,...a}=e;return(0,n.jsxs)(ea.H_,{"data-slot":"menubar-checkbox-item",className:s("\n          relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none\n          focus:bg-accent focus:text-accent-foreground\n          data-[disabled]:pointer-events-none data-[disabled]:opacity-50\n          [&_svg]:pointer-events-none [&_svg]:shrink-0\n          [&_svg:not([class*='size-'])]:size-4\n        ",t),checked:l,...a,children:[(0,n.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(ea.VF,{children:(0,n.jsx)(eo.A,{className:"size-4"})})}),r]})}function em(e){let{className:t,children:r,...l}=e;return(0,n.jsxs)(ea.hN,{"data-slot":"menubar-radio-item",className:s("\n          relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none\n          focus:bg-accent focus:text-accent-foreground\n          data-[disabled]:pointer-events-none data-[disabled]:opacity-50\n          [&_svg]:pointer-events-none [&_svg]:shrink-0\n          [&_svg:not([class*='size-'])]:size-4\n        ",t),...l,children:[(0,n.jsx)("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(ea.VF,{children:(0,n.jsx)(es.A,{className:"size-2 fill-current"})})}),r]})}function eb(e){let{className:t,...r}=e;return(0,n.jsx)(ea.wv,{"data-slot":"menubar-separator",className:s("-mx-1 my-1 h-px bg-border",t),...r})}function ev(e){let{className:t,...r}=e;return(0,n.jsx)("span",{"data-slot":"menubar-shortcut",className:s("ml-auto text-xs tracking-widest text-muted-foreground",t),...r})}function ej(e){let{...t}=e;return(0,n.jsx)(ea.Pb,{"data-slot":"menubar-sub",...t})}function ek(e){let{className:t,inset:r,children:l,...a}=e;return(0,n.jsxs)(ea.ZP,{"data-slot":"menubar-sub-trigger","data-inset":r,className:s("\n          flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none\n          focus:bg-accent focus:text-accent-foreground\n          data-[inset]:pl-8\n          data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\n        ",t),...a,children:[l,(0,n.jsx)(ei.A,{className:"ml-auto h-4 w-4"})]})}function ey(e){let{className:t,...r}=e;return(0,n.jsx)(ea.G5,{"data-slot":"menubar-sub-content",className:s("\n          z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border\n          bg-popover p-1 text-popover-foreground shadow-lg\n          data-[side=bottom]:slide-in-from-top-2\n          data-[side=left]:slide-in-from-right-2\n          data-[side=right]:slide-in-from-left-2\n          data-[side=top]:slide-in-from-bottom-2\n          data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95\n          data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95\n        ",t),...r})}function ew(e){let{className:t,...r}=e;return(0,n.jsx)("textarea",{"data-slot":"textarea",className:s("\n          flex field-sizing-content min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base\n          shadow-xs transition-[color,box-shadow] outline-none\n          placeholder:text-muted-foreground\n          focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\n          disabled:cursor-not-allowed disabled:opacity-50\n          aria-invalid:border-destructive aria-invalid:ring-destructive/20\n          md:text-sm\n          dark:bg-input/30 dark:aria-invalid:ring-destructive/40\n        ",t),...r})}var eC=r(489);function eN(e){let{className:t,...r}=e;return(0,n.jsx)(eC.b,{"data-slot":"label",className:s("\n          flex items-center gap-2 text-sm leading-none font-medium select-none\n          group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50\n          peer-disabled:cursor-not-allowed peer-disabled:opacity-50\n        ",t),...r})}let eS={1:"tl",2:"tc",3:"tr",4:"lc",5:"cc",6:"rc",7:"bl",8:"bc",9:"br"};function ez(){let[e,t]=(0,l.useState)(),[r,a]=(0,l.useState)(Array.from({length:9},()=>Array(9).fill(!1))),[o,i]=(0,l.useState)(null),c=(0,l.useRef)(null);(0,l.useEffect)(()=>{A()},[]);let d=["red","orange","yellow","green","cyan","blue","violet","pink","transparent"],h=[1,2,3,4,5,6,7,8,9,0],g="color"===o,x="center"===o,p="corner"===o,m=async()=>{try{var e;let t=null==(e=c.current)?void 0:e.exportState();if(!t)return;_(t),M(!0)}catch(e){console.error(e)}},b=e=>{if(!(null==e?void 0:e.startsWith("SG1|")))return alert("Invalid payload"),!1;try{var t;return null==(t=c.current)||t.importState(e),!0}catch(e){return console.error(e),alert(e.message||"Failed to import"),!1}},[v,j]=(0,l.useState)(!1),[k,y]=(0,l.useState)(""),[w,C]=(0,l.useState)(null),N=(0,l.useRef)(null),S=(0,l.useRef)(null),z=async e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];r&&(y((await r.text()).trim()),C(null),e.target.value="")},A=()=>{try{let e=new URL(window.location.href),t=e.searchParams.get("state")||e.hash.replace(/^#state=/,"");if(!t)return;b(decodeURIComponent(t))}catch(e){console.error(e)}},[E,M]=(0,l.useState)(!1),[R,_]=(0,l.useState)(""),L=async()=>{try{var e;await (null==(e=navigator.clipboard)?void 0:e.writeText(R))}catch(e){console.error(e),alert("Failed to copy")}},T=()=>{var e,t;return null!=(t=null==(e=c.current)?void 0:e.exportState())?t:""},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sudoku.sg1.txt",r=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download=t,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(n)},P=async e=>{try{var t;return await (null==(t=navigator.clipboard)?void 0:t.writeText(e)),!0}catch(e){return console.error(e),alert("Failed to copy"),!1}},X=()=>{let e=T();e&&D(e)},B=async()=>{let e=T();if(!e)return;let t=new URL(window.location.href);t.searchParams.set("state",e),await P(t.toString()),alert("Share link copied to clipboard")},W=async()=>{let e=T();e&&await P(e)},H=()=>{j(!0),setTimeout(()=>{var e;return null==(e=N.current)?void 0:e.click()},0)},q=()=>{var e;null==(e=c.current)||e.reset()},J=()=>{var e;null==(e=c.current)||e.undo()},Q=()=>{var e;null==(e=c.current)||e.redo()};(0,l.useEffect)(()=>{let e=e=>{let t=(e=>{if(!(e instanceof HTMLElement))return!1;let t=e.tagName;return e.isContentEditable||"INPUT"===t||"TEXTAREA"===t||"SELECT"===t})(e.target);if(e.ctrlKey||e.metaKey)if(e.shiftKey||e.altKey){if(e.shiftKey&&!e.altKey){if("s"===e.key||"S"===e.key){e.preventDefault(),X();return}if("o"===e.key||"O"===e.key){e.preventDefault(),H();return}}}else{if(t)return;if("o"===e.key||"O"===e.key){e.preventDefault(),j(!0);return}if("r"===e.key||"R"===e.key){e.preventDefault(),q();return}if("z"===e.key||"Z"===e.key){e.preventDefault(),J();return}if("y"===e.key||"Y"===e.key){e.preventDefault(),Q();return}}t||v||E||e.ctrlKey||e.metaKey||e.altKey||(("n"===e.key||"N"===e.key)&&i(null),("x"===e.key||"X"===e.key)&&i("center"===o?null:"center"),("c"===e.key||"C"===e.key)&&i("corner"===o?null:"corner"),("v"===e.key||"V"===e.key)&&i("color"===o?null:"color"))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v,E,o]);let[ea,eo]=(0,l.useState)(!1);(0,l.useEffect)(()=>{try{var e,t;let r=localStorage.getItem("theme"),n=null==(e=(t=window).matchMedia)?void 0:e.call(t,"(prefers-color-scheme: dark)").matches,l=r?"dark"===r:!!n;eo(l),"undefined"!=typeof document&&document.documentElement.classList.toggle("dark",l)}catch(e){}},[]),(0,l.useEffect)(()=>{try{"undefined"!=typeof document&&document.documentElement.classList.toggle("dark",ea),localStorage.setItem("theme",ea?"dark":"light")}catch(e){}},[ea]);let[es,ei]=(0,l.useState)(!1);return(0,n.jsxs)("div",{className:"space-y-4 p-4",children:[(0,n.jsxs)(ec,{className:"w-fit",children:[(0,n.jsxs)(ed,{children:[(0,n.jsx)(eh,{children:"File"}),(0,n.jsxs)(eg,{children:[es?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ej,{children:[(0,n.jsx)(ek,{children:"Save..."}),(0,n.jsxs)(ey,{children:[(0,n.jsxs)(ex,{onClick:m,children:["Show saving dialog",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"S"})]})]}),(0,n.jsxs)(ex,{onClick:X,children:["Save file",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"Shift"}),(0,n.jsx)("kbd",{children:"S"})]})]}),(0,n.jsx)(ex,{onClick:B,children:"Share link"}),es&&(0,n.jsx)(ex,{onClick:W,children:"Copy SG1 payload"})]})]}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(ek,{children:"Open..."}),(0,n.jsxs)(ey,{children:[(0,n.jsxs)(ex,{onClick:()=>j(!0),children:["Show opening dialog",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"O"})]})]}),(0,n.jsxs)(ex,{onClick:H,children:["Open file",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"Shift"}),(0,n.jsx)("kbd",{children:"O"})]})]}),(0,n.jsx)(ex,{onClick:()=>{j(!0),setTimeout(()=>{var e;return null==(e=S.current)?void 0:e.focus()},0)},children:"Paste SG1 payload"})]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ex,{onClick:m,children:["Save",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"S"})]})]}),(0,n.jsxs)(ex,{onClick:()=>j(!0),children:["Open",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"O"})]})]})]}),(0,n.jsx)(eb,{}),(0,n.jsxs)(ex,{onClick:q,children:["Reset current puzzle",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"R"})]})]})]})]}),(0,n.jsxs)(ed,{children:[(0,n.jsx)(eh,{children:"Edit"}),(0,n.jsxs)(eg,{children:[(0,n.jsxs)(ex,{inset:!0,onClick:J,children:["Undo",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"Z"})]})]}),(0,n.jsxs)(ex,{inset:!0,onClick:Q,children:["Redo",(0,n.jsxs)(ev,{children:[(0,n.jsx)("kbd",{children:"Ctrl"}),(0,n.jsx)("kbd",{children:"Y"})]})]}),es&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eb,{}),(0,n.jsx)(ep,{disabled:!0,children:"Editorial Mode"})]})]})]}),(0,n.jsxs)(ed,{children:[(0,n.jsx)(eh,{children:"View"}),(0,n.jsxs)(eg,{children:[(0,n.jsxs)(ef,{value:o||"normal",onValueChange:e=>i(e),children:[(0,n.jsxs)(em,{value:"normal",children:["Normal",(0,n.jsx)(ev,{children:(0,n.jsx)("kbd",{children:"N"})})]}),(0,n.jsxs)(em,{value:"center",children:["Center Notes",(0,n.jsx)(ev,{children:(0,n.jsx)("kbd",{children:"X"})})]}),(0,n.jsxs)(em,{value:"corner",children:["Corner Notes",(0,n.jsx)(ev,{children:(0,n.jsx)("kbd",{children:"C"})})]}),(0,n.jsxs)(em,{value:"color",children:["Color Annotations",(0,n.jsx)(ev,{children:(0,n.jsx)("kbd",{children:"V"})})]})]}),(0,n.jsx)(eb,{}),(0,n.jsx)(ep,{checked:ea,onCheckedChange:e=>eo(e),children:"Dark Mode"}),(0,n.jsx)(eb,{}),(0,n.jsx)(ep,{checked:es,onCheckedChange:e=>ei(e),children:"Expert Mode"})]})]})]}),(0,n.jsx)(O,{ref:c,pencilMode:"center"===o?"center":"corner"===o?"corner":null,currentCell:e,selectedCells:r,onSelectionChange:a,onCurrentCellChange:t,onCellSelect:e=>{let{row:t,col:r}=e;console.log("Clicked:",t,r)}}),(0,n.jsxs)("div",{className:"flex w-fit flex-col gap-2 rounded-md border p-2",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsxs)(U,{variant:"outline","aria-label":"Toggle Center Notes Mode",title:"Center Notes Mode (X)",pressed:"center"===o,onPressedChange:e=>i(e?"center":null),children:[(0,n.jsx)("span",{className:"sr-only",children:"Center Notes"}),(0,n.jsx)(I.A,{})]}),(0,n.jsxs)(U,{variant:"outline","aria-label":"Toggle Corner Notes Mode",title:"Corner Notes Mode (C)",pressed:"corner"===o,onPressedChange:e=>i(e?"corner":null),children:[(0,n.jsx)("span",{className:"sr-only",children:"Corner Notes"}),(0,n.jsx)(F.A,{})]}),(0,n.jsxs)(U,{variant:"outline","aria-label":"Toggle Color Annotation Mode",title:"Color Annotation Mode (V)",pressed:"color"===o,onPressedChange:e=>i(e?"color":null),children:[(0,n.jsx)("span",{className:"sr-only",children:"Color Annotations"}),(0,n.jsx)(K.A,{})]})]}),(0,n.jsx)(Y,{}),(0,n.jsx)("div",{className:"grid w-fit grid-cols-3 gap-1",children:Array.from({length:10}).map((e,t)=>{let r=g&&9===t,l=g?r?"Clear color from selection":"Apply ".concat(d[t]," color to selection"):x?"Toggle center note ".concat(h[t]):p?"Toggle corner note ".concat(h[t]):"Set digit ".concat(h[t]),a=g?r?"Clear all colors":"Toggle ".concat(d[t]," color"):x||p?0===h[t]?"Clear notes":"".concat(x?"Center":"Corner"," note ").concat(h[t]):0===h[t]?"Clear value":"Place ".concat(h[t]),o=(()=>{if(0===h[t])return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"sr-only",children:"Clear"}),(0,n.jsx)(G.A,{})]});if(g){let e=d[t];return(0,n.jsx)("span",{"aria-hidden":!0,className:"size-4 rounded-xs border border-foreground/10 ".concat(f[e])})}let e=h[t];if(p){let t=eS[e];return(0,n.jsx)("span",{className:s(u[t],"font-serif text-xxs leading-none font-semibold tracking-tight"),children:e})}return(0,n.jsx)("span",{className:x?"text-xs font-serif":"text-base",children:e})})();return(0,n.jsx)(Z,{size:"icon",variant:"outline","aria-label":l,title:a,className:s("relative",0===h[t]?"col-start-2":void 0),onClick:()=>(e=>{var t,r,n,l,a,o,s;if(g){if(e<d.length){let t=d[e];null==(r=c.current)||r.annotateColor(t)}else null==(n=c.current)||n.annotateClear();return}let i=h[e];return x?void(0===i?null==(l=c.current)||l.clearCenterNotes():null==(a=c.current)||a.toggleCenterNote(i)):p?void(0===i?null==(o=c.current)||o.clearCornerNotes():null==(s=c.current)||s.toggleCornerNote(i)):void(null==(t=c.current)||t.setDigit(i))})(t),children:o},t)})})]}),(0,n.jsx)($,{open:v,onOpenChange:j,children:(0,n.jsxs)(ee,{children:[(0,n.jsxs)(et,{children:[(0,n.jsx)(en,{children:"Upload sudoku state"}),(0,n.jsx)(el,{children:"Paste your SG1 payload or choose a file from your device."})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(eN,{htmlFor:"sg1",children:"Sudoku state"}),(0,n.jsx)(ew,{id:"sg1",placeholder:"SG1|...",value:k,onChange:e=>y(e.target.value),"aria-invalid":!!w||void 0,spellCheck:!1,ref:S}),w?(0,n.jsx)("p",{className:"text-sm text-destructive",children:w}):(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tip: payload should start with SG1|"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(Z,{variant:"outline",className:"w-full",onClick:()=>{var e;return null==(e=N.current)?void 0:e.click()},type:"button",children:[(0,n.jsx)(V.A,{size:12})," Choose file"]}),(0,n.jsx)("input",{ref:N,type:"file",accept:".txt,.sg1",className:"hidden",onChange:z})]})]}),(0,n.jsxs)(er,{children:[(0,n.jsx)(Z,{variant:"outline",onClick:()=>j(!1),type:"button",children:"Cancel"}),(0,n.jsx)(Z,{onClick:()=>{let e=k.trim();return e?e.startsWith("SG1|")?void(C(null),b(e),j(!1),y("")):void C("Invalid payload. Expected text starting with SG1|."):void C("Please paste a state or choose a file.")},type:"button",children:"Send"})]})]})}),(0,n.jsx)($,{open:E,onOpenChange:M,children:(0,n.jsxs)(ee,{children:[(0,n.jsxs)(et,{children:[(0,n.jsx)(en,{children:"Export sudoku state"}),(0,n.jsx)(el,{children:"Copy or download your SG1 payload."})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(eN,{htmlFor:"sg1-out",children:"Sudoku state"}),(0,n.jsx)(ew,{id:"sg1-out",value:R,readOnly:!0,spellCheck:!1})]}),(0,n.jsxs)(er,{children:[(0,n.jsx)(Z,{variant:"outline",onClick:()=>M(!1),type:"button",children:"Close"}),(0,n.jsx)(Z,{variant:"secondary",onClick:L,type:"button",children:"Copy"}),(0,n.jsx)(Z,{onClick:()=>{try{let e=new Blob([R],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="sudoku.sg1.txt",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(t)}catch(e){console.error(e)}},type:"button",children:"Download"})]})]})})]})}}},e=>{e.O(0,[69,441,255,358],()=>e(e.s=7767)),_N_E=e.O()}]);