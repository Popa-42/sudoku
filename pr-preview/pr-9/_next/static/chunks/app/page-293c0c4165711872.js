(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6235:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var l=r(5155),n=r(2115),o=r(2821),a=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,o.$)(t))}let i=(e,t,r)=>Math.min(r,Math.max(t,e));function u(e,t,r,l){let n=null!=l?l-1:1/0;return{row:i(e.row+t,0,n),col:i(e.col+r,0,n)}}let c=["tl","tr","bl","br","tc","rc","bc","lc","cc"],d={tl:"absolute top-0 left-0 translate-x-0.5 translate-y-0.5",tr:"absolute top-0 right-0 -translate-x-0.5 translate-y-0.5",bl:"absolute bottom-0 left-0 translate-x-0.5 -translate-y-0.5",br:"absolute bottom-0 right-0 -translate-x-0.5 -translate-y-0.5",tc:"absolute top-0 left-1/2 -translate-x-1/2 translate-y-0.5",rc:"absolute right-0 top-1/2 -translate-y-1/2 -translate-x-0.5",bc:"absolute bottom-0 left-1/2 -translate-x-1/2 -translate-y-0.5",lc:"absolute left-0 top-1/2 -translate-y-1/2 translate-x-0.5",cc:"absolute inset-0 flex items-center justify-center"};function f(e){return Array.from({length:e},()=>Array(e).fill(!1))}function h(e){return e.some(e=>e.some(Boolean))}function p(e,t){return e.findIndex(e=>{let[r,l]=e;return r===t[0]&&l===t[1]})}function b(e,t){return -1===p(e,t)&&e.push(t),e}function g(e,t){return e.filter(e=>{let[r,l]=e;return r!==t[0]||l!==t[1]})}function m(e){let t=[];for(let r=0;r<e.length;r++)for(let l=0;l<e[r].length;l++)e[r][l]&&t.push([r,l]);return t}function x(e){return Array.from({length:e},()=>Array(e).fill(0))}function v(e){return Array.from({length:e},()=>Array.from({length:e},()=>Array(e+1).fill(0)))}function w(e,t){return h(e)?m(e):t?[t]:[]}let k=n.memo(function(e){var t;let{size:r=9,className:o,presetGrid:a,editedGrid:i,pencilGrid:k,pencilMode:C=null,currentCell:y,selectedCells:j,onCellSelect:M,onSelectionChange:A,onCurrentCellChange:N,box:z,regions:S,cellClassName:E,dividerClassName:P="border-foreground",...D}=e;if(!Number.isInteger(r)||r<=0)throw Error("Size must be a positive integer.");if(S&&(S.length!==r||S.some(e=>e.length!==r)))throw Error('Invalid "regions": expected a size\xd7size matrix.');let _=(0,n.useMemo)(()=>f(r),[r]),[I,R]=(0,n.useState)(void 0),[K,T]=(0,n.useState)(_),[B,L]=(0,n.useState)([]),U=(0,n.useRef)(null),F=(0,n.useRef)(null),O=(0,n.useRef)(!1),$=(0,n.useRef)(null),[q,G]=(0,n.useState)(()=>x(r)),[Q,V]=(0,n.useState)(()=>v(r)),[X,Y]=(0,n.useState)(()=>v(r));(0,n.useEffect)(()=>{T(_),R(void 0),L([]),G(x(r)),V(v(r)),Y(v(r))},[r,_]);let H=(0,n.useMemo)(()=>null!=z?z:function(e){if(9===e)return{rows:3,cols:3};let t=Math.floor(Math.sqrt(e));return t>1&&e%t==0?{rows:t,cols:e/t}:{rows:e,cols:1}}(r),[z,r]),J=(0,n.useMemo)(()=>{if(S)return(e,t)=>S[e][t];let e=H.cols,t=H.rows,l=Math.ceil(r/e);return(r,n)=>Math.floor(r/t)*l+Math.floor(n/e)},[S,H,r]),W=null!=y?y:I,Z=!(t=null!=j?j:K)||t.length!==r||t.some(e=>e.length!==r)?f(r):t,ee=(0,n.useCallback)((e,t)=>{var r,l;return(null!=(l=null==a||null==(r=a[e])?void 0:r[t])?l:0)>0},[a]);(0,n.useEffect)(()=>{h(Z)||(y||R(void 0),L([]),null==N||N(void 0))},[Z,y,N]);let et=(0,n.useCallback)((e,t)=>{var r;return!!(null==Z||null==(r=Z[e])?void 0:r[t])},[Z]);(0,n.useCallback)((e,t)=>!!W&&W[0]===e&&W[1]===t,[W]);let er=(0,n.useCallback)((e,t)=>{let l=["size-10","border","border-foreground","text-center","select-none","cursor-pointer"];E&&l.push(E);let n=[];if(S){let l=J(e,t),o=0===e||J(e-1,t)!==l,a=0===t||J(e,t-1)!==l,s=t===r-1||J(e,t+1)!==l,i=e===r-1||J(e+1,t)!==l;o&&n.push("border-t-2",P),a&&n.push("border-l-2",P),s&&n.push("border-r-2",P),i&&n.push("border-b-2",P)}else{let l=0===e||e%H.rows==0,o=0===t||t%H.cols==0,a=t===r-1||(t+1)%H.cols==0,s=e===r-1||(e+1)%H.rows==0;l&&n.push("border-t-2",P),o&&n.push("border-l-2",P),a&&n.push("border-r-2",P),s&&n.push("border-b-2",P)}return s(l.join(" "),n.join(" "))},[S,J,r,H,P,E]),el=(0,n.useCallback)(e=>{j||T(e),null==A||A(e)},[j,A]),en=(0,n.useCallback)(e=>{y||R(e),null==N||N(e)},[y,N]),eo=(0,n.useCallback)((e,t)=>Math.max(0,Math.min(t-1,e)),[]),ea=(0,n.useCallback)(e=>{let t=F.current;if(!t)return;let l=t.getBoundingClientRect(),n=e.clientX-l.left,o=e.clientY-l.top;if(n<0||o<0||n>l.width||o>l.height)return;let a=eo(Math.floor(n/l.width*r),r);return[eo(Math.floor(o/l.height*r),r),a]},[r,eo]),es=(0,n.useCallback)(e=>{var t,l,n;let o=ea(e);if(!o)return;null==(t=U.current)||t.focus();let[a,s]=o,i=e.ctrlKey||e.metaKey,u=e.shiftKey,c=i?Z.map(e=>e.slice()):f(r),d=c.map(e=>e.slice()),h=i?c[a][s]?"paint-erase":"paint-add":u?"rect":"paint-add",m={mode:h,start:[a,s],base:c,working:d,visited:new Set([a*r+s]),last:[a,s]};if("rect"===h)(d=f(r))[a][s]=!0,m.working=d,L([[a,s]]),el(d),en([a,s]);else if("paint-add"===h)d[a][s]=!0,m.working=d,L(i?e=>b([...e],[a,s]):[[a,s]]),el(d.map(e=>e.slice())),en([a,s]);else{d[a][s]=!1,m.working=d,L(e=>g(e,[a,s])),el(d.map(e=>e.slice()));let e=p(B,[a,s]),t=B.filter(e=>{let[t,r]=e;return t!==a||r!==s});en(e>0?B[e-1]:t[t.length-1])}$.current=m,O.current=!0,null==(l=(n=e.currentTarget).setPointerCapture)||l.call(n,e.pointerId)},[Z,r,el,en,ea,B]),ei=(0,n.useCallback)(e=>{if(!$.current)return;let t=ea(e);if(!t)return;let[l,n]=t,o=$.current;if("rect"===o.mode){let[e,t]=o.start,a=Math.min(e,l),s=Math.max(e,l),i=Math.min(t,n),u=Math.max(t,n),c=f(r);for(let e=a;e<=s;e++)for(let t=i;t<=u;t++)c[e][t]=!0;o.working=c,o.last=[l,n],L(m(c)),el(c)}else if("paint-add"===o.mode){let e=l*r+n;o.visited.has(e)||(o.visited.add(e),o.working[l][n]=!0,o.last=[l,n],L(e=>b([...e],[l,n])),el(o.working.map(e=>e.slice())))}else{let e=l*r+n;if(!o.visited.has(e)&&(o.visited.add(e),o.working[l][n])){var a;o.working[l][n]=!1,o.last=[l,n],L(e=>g(e,[l,n])),el(o.working.map(e=>e.slice())),W&&(a=[l,n],W[0]===a[0]&&W[1]===a[1])&&L(e=>{let t=g(e,[l,n]);return en(t.length?t[t.length-1]:void 0),t})}}},[r,el,ea,W,en]),eu=(0,n.useCallback)(()=>{var e;if(!$.current)return;let t=$.current;("rect"===t.mode||"paint-add"===t.mode)&&en(null!=(e=t.last)?e:t.start),$.current=null,O.current=!1},[en]),ec=(0,n.useCallback)(e=>{eu();try{e.currentTarget.releasePointerCapture(e.pointerId)}catch(e){}},[eu]),ed=(0,n.useCallback)(()=>{O.current&&eu()},[eu]),ef=(0,n.useCallback)(e=>{let t=w(Z,W);0!==t.length&&G(r=>{let l=r.map(e=>e.slice());for(let[r,n]of t)ee(r,n)||(l[r][n]=e>0?e:0);return l})},[Z,W,ee]),eh=(0,n.useCallback)((e,t)=>{if(t<1||t>r)return;let l=w(Z,W);l.length&&e(e=>{let r=e.map(e=>e.map(e=>e.slice()));for(let[e,n]of l)ee(e,n)||(r[e][n][t]=+!r[e][n][t]);return r})},[Z,W,ee,r]),ep=(0,n.useCallback)(e=>{let t=w(Z,W);t.length&&e(e=>{let r=e.map(e=>e.map(e=>e.slice()));for(let[e,l]of t)ee(e,l)||r[e][l].fill(0);return r})},[Z,W,ee]),eb=(0,n.useCallback)((e,t)=>{let l=W;l||(l=h(Z)?m(Z)[0]:[0,0]);let n=u({row:l[0],col:l[1]},e,t,r),o=[n.row,n.col];en(o),el(function(e,t,r){let l=f(e);return l[t][r]=!0,l}(r,o[0],o[1])),L([o])},[W,Z,r,en,el]),eg=(0,n.useCallback)(e=>{let t=e.key;if("Escape"===t){e.preventDefault(),el(f(r)),en(void 0),L([]);return}if("ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t){e.preventDefault(),"ArrowUp"===t&&eb(-1,0),"ArrowDown"===t&&eb(1,0),"ArrowLeft"===t&&eb(0,-1),"ArrowRight"===t&&eb(0,1);return}if("Backspace"===t||"Delete"===t||"0"===t){e.preventDefault(),"center"===C?ep(V):"corner"===C?ep(Y):ef(0);return}if(/^[1-9]$/.test(t)){let l=parseInt(t,10);l>=1&&l<=Math.min(9,r)&&(e.preventDefault(),"center"===C?eh(V,l):"corner"===C?eh(Y,l):ef(l))}},[el,r,en,eb,C,ep,ef,eh]);return(0,n.useEffect)(()=>{U.current&&(h(Z)||W)&&document.activeElement!==U.current&&U.current.focus()},[C,Z,W]),(0,l.jsx)("div",{ref:U,tabIndex:0,onKeyDown:eg,className:"outline-none focus:outline-none",children:(0,l.jsx)("table",{role:"grid","aria-rowcount":r,"aria-colcount":r,children:(0,l.jsx)("tbody",{ref:F,className:s("border-2 border-foreground",o),onPointerDown:es,onPointerMove:ei,onPointerUp:ec,onPointerLeave:ed,...D,children:Array.from({length:r}).map((e,t)=>(0,l.jsx)("tr",{role:"row",children:Array.from({length:r}).map((e,n)=>{var o,i,f,h,p,b;let g=t>0&&et(u({row:t,col:n},-1,0,r).row,u({row:t,col:n},-1,0,r).col),m=n<r-1&&et(u({row:t,col:n},0,1,r).row,u({row:t,col:n},0,1,r).col),x=t<r-1&&et(u({row:t,col:n},1,0,r).row,u({row:t,col:n},1,0,r).col),v=n>0&&et(u({row:t,col:n},0,-1,r).row,u({row:t,col:n},0,-1,r).col),w=n>0&&t>0&&!et(t-1,n-1)&&g&&v,k=n<r-1&&t>0&&!et(t-1,n+1)&&g&&m,C=n>0&&t<r-1&&!et(t+1,n-1)&&x&&v,y=n<r-1&&t<r-1&&!et(t+1,n+1)&&x&&m,j=et(t,n),M=[];j&&(v||M.push("inset 4px 0 0 0 var(--sel)"),m||M.push("inset -4px 0 0 0 var(--sel)"),g||M.push("inset 0 4px 0 0 var(--sel)"),x||M.push("inset 0 -4px 0 0 var(--sel)"));let A=M.join(", "),N=null!=(p=null==a||null==(o=a[t])?void 0:o[n])?p:0,z=null!=(b=null==q||null==(i=q[t])?void 0:i[n])?b:0,S=N>0?N:z>0?z:"",E=N||z||null==Q||null==(f=Q[t])?void 0:f[n],P=N||z||null==X||null==(h=X[t])?void 0:h[n],D=Math.min(9,r),_=[],I=[];if(E)for(let e=1;e<=D;e++)E[e]&&_.push(e);if(P)for(let e=1;e<=D;e++)P[e]&&I.push(e);let R=_.length>0?c.slice(0,8):c;return(0,l.jsx)("td",{role:"gridcell",className:er(t,n),children:(0,l.jsxs)("div",{"aria-selected":j,"aria-readonly":ee(t,n)||void 0,className:s("relative flex size-full cursor-pointer items-center justify-center text-2xl select-none","[--sel:theme(colors.blue.300)]",ee(t,n)?"text-foreground":"text-blue-700 font-semibold"),style:A?{boxShadow:A}:void 0,children:[j&&w&&(0,l.jsx)("span",{className:"absolute top-0 left-0 size-[4px] rounded-br-xs bg-blue-300"}),j&&k&&(0,l.jsx)("span",{className:"absolute top-0 right-0 size-[4px] rounded-bl-xs bg-blue-300"}),j&&C&&(0,l.jsx)("span",{className:"absolute bottom-0 left-0 size-[4px] rounded-tr-xs bg-blue-300"}),j&&y&&(0,l.jsx)("span",{className:"absolute right-0 bottom-0 size-[4px] rounded-tl-xs bg-blue-300"}),""!==S&&(0,l.jsx)("span",{className:"absolute",children:S}),""===S&&I.length>0&&(0,l.jsx)(l.Fragment,{children:I.slice(0,9).map((e,t)=>{let r=R[t];return r?(0,l.jsx)("span",{className:s(d[r],"text-xs leading-none font-semibold tracking-tight"),children:e},"".concat(e,"-").concat(t)):null})}),""===S&&_.length>0&&(0,l.jsx)("span",{className:"absolute text-xs leading-none font-semibold tracking-tight",children:_.join("")})]})},n)})},t))})})})});var C=r(8710);let y=(0,r(3101).F)("\n    inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap\n    transition-[color,box-shadow] outline-none\n    hover:bg-muted hover:text-muted-foreground\n    focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\n    disabled:pointer-events-none disabled:opacity-50\n    aria-invalid:border-destructive aria-invalid:ring-destructive/20\n    data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\n    dark:aria-invalid:ring-destructive/40\n    [&_svg]:pointer-events-none [&_svg]:shrink-0\n    [&_svg:not([class*='size-'])]:size-4\n  ",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 min-w-9 px-2",sm:"h-8 min-w-8 px-1.5",lg:"h-10 min-w-10 px-2.5"}},defaultVariants:{variant:"default",size:"default"}});function j(e){let{className:t,variant:r,size:n,...o}=e;return(0,l.jsx)(C.b,{"data-slot":"toggle",className:s(y({variant:r,size:n,className:t})),...o})}var M=r(8514),A=r(2794);function N(){let[e,t]=(0,n.useState)(),[r,o]=(0,n.useState)(Array.from({length:9},()=>Array(9).fill(!1))),[a,s]=(0,n.useState)(null);return(0,l.jsxs)("div",{className:"space-y-4 p-8",children:[(0,l.jsx)(k,{presetGrid:[[0,0,9,0,0,7,0,0,0],[0,0,0,0,0,0,2,0,0],[0,1,0,0,8,6,0,7,0],[1,8,0,0,0,2,0,0,6],[0,4,0,5,0,0,0,0,3],[6,0,0,8,4,0,0,0,5],[0,3,4,7,0,0,8,0,0],[0,0,0,0,0,0,0,0,0],[0,0,8,0,2,0,0,0,0]],pencilMode:a,currentCell:e,selectedCells:r,onSelectionChange:o,onCurrentCellChange:t,onCellSelect:e=>{let{row:t,col:r}=e;console.log("Clicked:",t,r)}}),(0,l.jsxs)("div",{className:"flex gap-2 rounded-md border p-2",children:[(0,l.jsx)(j,{variant:"outline","aria-label":"Toggle Center Notes Mode",pressed:"center"===a,onPressedChange:e=>s(e?"center":null),children:(0,l.jsx)(M.A,{})}),(0,l.jsx)(j,{variant:"outline","aria-label":"Toggle Corner Notes Mode",pressed:"corner"===a,onPressedChange:e=>s(e?"corner":null),children:(0,l.jsx)(A.A,{})})]})]})}},7767:(e,t,r)=>{Promise.resolve().then(r.bind(r,6235))}},e=>{e.O(0,[392,441,255,358],()=>e(e.s=7767)),_N_E=e.O()}]);